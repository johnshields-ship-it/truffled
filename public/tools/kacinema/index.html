<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaiden's Cinema</title>
    <meta name="title" content="Kaiden's Cinema">
    <meta name="description" content="Watch Shows and Movies at any time, free.">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PXHK7Q7G3Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-PXHK7Q7G3Z');
</script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        window.onload = function() {
            alert("Made by 98corbins. thanks to him we have movies <3");
        };
    </script>
    <link rel="icon" type="image/png" href="favicon.png">

    <style>
    :root {
        --theme-name: 'Cinematic Noir';
        --bg-primary: #0a0014;
        --bg-surface: #120025;
        --bg-light: #1c003a;
        --accent-main: #ff0090;
        --accent-secondary: #00eaff;
        --text-primary: #f5f5f5;
        --text-secondary: #d1d1e9;
        --text-muted: #8f8f9c;
        --button-shadow: 0 0 10px var(--accent-main);
        --radius-lg: 10px;
        --radius-sm: 5px;
        --shadow-subtle: 0 0 20px rgba(255, 0, 144, 0.2);
        --neon-blue: #00eaff;
        --neon-magenta: #ff0090;
        --ring-color: #ffffff;
        --base-font: 'Inter', sans-serif;
        --logo-font: 'Arial', sans-serif;
        --text-glow: none;

        --gap: 16px;
        --card-radius: var(--radius-lg);
    }

    ::-webkit-scrollbar {
    width: 12px;
    height: 12px;
    }

    ::-webkit-scrollbar-track {
        background: var(--bg-surface);
        border-radius: var(--radius-lg);
    }

    ::-webkit-scrollbar-thumb {
        background: var(--accent-main);
        border-radius: var(--radius-lg);
        box-shadow: 0 0 8px var(--accent-main);
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--accent-secondary);
        box-shadow: 0 0 12px var(--accent-secondary);
    }

    ::-webkit-scrollbar-corner {
        background: var(--bg-surface);
    }

    .theme-cyberpunk {
        --theme-name: 'Cinematic Noir';
        --bg-primary: #0a0014;
        --bg-surface: #120025;
        --bg-light: #1c003a;
        --accent-main: #ff0090;
        --accent-secondary: #00eaff;
        --text-primary: #f5f5f5;
        --text-secondary: #d1d1e9;
        --text-muted: #8f8f9c;
        --button-shadow: 0 0 10px var(--accent-main);
        --neon-blue: #00eaff;
        --neon-magenta: #ff0090;
    }

    .theme-midnight {
        --theme-name: 'Midnight Blue';
        --bg-primary: #0c1622;
        --bg-surface: #162236;
        --bg-light: #1d2e48;
        --accent-main: #4686ff;
        --accent-secondary: #3ec0ff;
        --text-primary: #ffffff;
        --text-secondary: #b6c8ff;
        --text-muted: #7683a3;
        --button-shadow: 0 0 10px rgba(70, 134, 255, 0.3);
        --neon-blue: #4686ff;
        --neon-magenta: #3ec0ff;
    }

    .theme-2022purple {
        --theme-name: '2022 Purple';
        --bg-primary: #1e0026;
        --bg-surface: #3a0b44;
        --bg-light: #4c1a5b;
        --accent-main: #9b4dff;
        --accent-secondary: #ff0090;
        --text-primary: #e6e6ff;
        --text-secondary: #b091e6;
        --text-muted: #7d6999;
        --button-shadow: 0 0 10px var(--accent-main);
        --neon-blue: #9b4dff;
        --neon-magenta: #ff0090;
    }

    .theme-crimson {
        --theme-name: 'Crimson Noir';
        --bg-primary: #1a0004;
        --bg-surface: #2b0006;
        --bg-light: #40000a;
        --accent-main: #ff1744;
        --accent-secondary: #ff8a80;
        --text-primary: #ffffff;
        --text-secondary: #ffcdd2;
        --text-muted: #ef9a9a;
        --button-shadow: 0 0 10px var(--accent-main);
        --neon-blue: #ff8a80;
        --neon-magenta: #ff1744;
    }

    .theme-solarized {
        --theme-name: 'Solarized Dark';
        --bg-primary: #002b36;
        --bg-surface: #073642;
        --bg-light: #586e75;
        --accent-main: #cb4b16;
        --accent-secondary: #b58900;
        --text-primary: #fdf6e3;
        --text-secondary: #839496;
        --text-muted: #586e75;
        --button-shadow: 0 0 10px var(--accent-main);
        --neon-blue: #2aa198;
        --neon-magenta: #d33682;
    }

    .theme-light {
        --theme-name: 'Flashbang (Light)';
        --bg-primary: #f0f0f0;
        --bg-surface: #ffffff;
        --bg-light: #e9e9e9;
        --accent-main: #3b82f6;
        --accent-secondary: #10b981;
        --text-primary: #1f2937;
        --text-secondary: #4b5563;
        --text-muted: #9ca3af;
        --button-shadow: 0 0 10px rgba(59, 130, 246, 0.4);
        --neon-blue: #3b82f6;
        --neon-magenta: #f97316;
    }

    .theme-spotify {
        --theme-name: 'Spotify Green';
        --bg-primary: #121212;
        --bg-surface: #181818;
        --bg-light: #282828;
        --accent-main: #1db954;
        --accent-secondary: #1ed760;
        --text-primary: #ffffff;
        --text-secondary: #b3b3b3;
        --text-muted: #535353;
        --button-shadow: 0 0 10px var(--accent-main);
        --neon-blue: #1ed760;
        --neon-magenta: #b3b3b3;
    }


    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');

    * { box-sizing: border-box; transition: color 0.4s, background-color 0.4s, border-color 0.4s; }
    html, body { height: 100%; margin: 0; }

    body {
        font-family: var(--base-font);
        background-color: var(--bg-primary);
        color: var(--text-primary);
        overflow: hidden;
    }

    #app-container {
        display: flex;
        flex-direction: column;
        height: 100vh;
        padding-top: 60px;
    }
    header {
        background-color: var(--bg-primary);
        border-bottom: 1px solid var(--bg-light);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
        transition: background-color 0.4s, box-shadow 0.4s, border-color 0.4s;
    }

    .nav-link-icon { color: var(--text-secondary); transition: all 0.2s; }
    .nav-link:hover .nav-link-icon,
    .nav-link.active .nav-link-icon {
        color: var(--accent-main);
        filter: drop-shadow(0 0 3px var(--accent-main));
    }

    #content-viewport {
        flex-grow: 1;
        overflow-y: auto;
        background-color: var(--bg-surface);
        transition: background-color 0.4s;
    }

    .content-page { display: none; min-height: 100%; padding: 24px; }
    .content-page.active { display: block; }

    .home-page { min-height: calc(100vh - 60px); background-color: var(--bg-primary); }
    .logo-container { position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; transform: translateY(-20px); }
    .glowing-ring {
        position: absolute;
        width: 700px; height: 400px;
        border-radius: 50%;
        border: 30px solid var(--ring-color);
        opacity: 1; z-index: 5;
        transform: translate(-50%, -50%) rotateX(60deg) rotateZ(30deg);
        box-shadow: 0 0 50px var(--ring-color), 0 0 80px var(--ring-color), inset 0 0 20px var(--ring-color), inset 0 0 50px var(--ring-color);
        left: 50%; top: 50%;
    }
    .logo-word {
        font-family: var(--logo-font);
        font-weight: 900;
        font-size: 8rem; line-height: 0.8;
        color: var(--ring-color);
        transform: skewX(-5deg);
        position: relative; z-index: 8;
        filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.9));
    }

    .kaidens-text {
        text-shadow: -4px -4px 0 var(--neon-blue), 4px 4px 0 var(--neon-blue), 0 0 10px rgba(255, 255, 255, 0.5), 0 0 25px var(--neon-blue), 0 0 45px var(--neon-blue);
    }
    .cinema-text {
        text-shadow: -4px -4px 0 var(--neon-magenta), 4px 4px 0 var(--neon-magenta), 0 0 10px rgba(255, 255, 255, 0.5), 0 0 25px var(--neon-magenta), 0 0 45px var(--neon-magenta);
    }

    @media (max-width: 768px) {
        .logo-word { font-size: 3.5rem; }
        .glowing-ring { width: 350px; height: 200px; border-width: 15px; }
    }

    .grid{
        display:grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: var(--gap);
        max-width: 1200px;
        margin: 0 auto;
    }
    @media (max-width:980px){ .grid{ grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); } }
    @media (max-width:720px){ .grid{ grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); } }
    @media (max-width:420px){ .grid{ grid-template-columns: repeat(2,1fr); } }

    .tmdb-card {
        position: relative;
        width: 100%;
        aspect-ratio: 2 / 3;
        border-radius: var(--card-radius);
        overflow: hidden;
        transform-style: preserve-3d;
        will-change: transform;
        cursor: pointer;
        border: 1px solid rgba(255,255,255,0.08);
        box-shadow: 0 18px 40px rgba(2,6,23,0.55);
        transition: box-shadow 160ms ease, transform 160ms ease;
        background: var(--bg-light);
    }
    .tmdb-card:hover {
        box-shadow: 0 15px 30px rgba(0,0,0,0.72), 0 0 20px var(--accent-main);
    }

    .tmdb-inner {
        position:absolute; inset:0; display:block;
        transform-style: preserve-3d;
        transition: transform 160ms ease;
        backface-visibility: hidden;
    }
    .tmdb-img {
        width:100%; height:100%; object-fit: cover; display:block;
        border-radius: inherit;
        transform: translateZ(0px); will-change: transform;
        user-select: none; pointer-events: none;
    }
    .shine {
        position:absolute; inset:0; z-index: 6;
        pointer-events: none; mix-blend-mode: overlay;
        transition: background 80ms linear;
    }
    .loader {
        position:absolute; inset:0; display:flex;
        align-items:center; justify-content:center; z-index:7;
        color: var(--text-primary); font-size:13px;
        background: rgba(0,0,0,0.5); backdrop-filter: blur(2px);
    }
    .placeholder {
        width:100%; height:100%; display:flex;
        align-items:center; justify-content:center;
        color:var(--text-secondary); font-size:13px; padding:8px; text-align:center;
        background: var(--bg-surface);
    }

    .popup-backdrop {
        position: fixed; inset: 0; display: none; align-items: center; justify-content: center;
        background: rgba(3,6,12,0.85); z-index: 3000; padding: 24px;
        backdrop-filter: blur(8px);
    }
    .popup {
        position: relative;
        width: 100%;
        max-width: 480px;
        max-height: 90vh;
        border-radius: 12px;
        background: var(--bg-surface);
        box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        overflow: hidden;
        display: flex;
        flex-direction: column;
    }
    .popup-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px 20px;
        border-bottom: 1px solid var(--bg-light);
    }
    .popup-body {
        padding: 24px;
        overflow-y: auto;
        flex-grow: 1;
    }


    .modal-backdrop {
        position: fixed; inset: 0; display: none; align-items: center; justify-content: center;
        background: rgba(3,6,12,0.85); z-index: 2000; padding: 24px;
        backdrop-filter: blur(8px);
    }
    .modal {
        position: relative; width: min(1200px, 98vw); height: min(90vh, 98vh);
        border-radius: 12px;
        background: var(--bg-surface);
        box-shadow: 0 40px 90px rgba(2,6,23,0.9);
        overflow: hidden; display: flex; align-items: center; justify-content: center;
    }
    .modal-frame {
        width: 100%; height: 100%; border: none; border-radius: 0; background: #000;
    }

    .modal-header {
        position: absolute; top: 10px; right: 10px; display:flex; align-items:center; gap:8px; z-index:2100;
    }
    .modal-title {
        font-weight:700; font-size:14px; background: rgba(0,0,0,0.4); padding:6px 10px; border-radius:8px; backdrop-filter: blur(6px); color: var(--text-primary);
        max-width: 40vw; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
        box-shadow: 0 0 8px rgba(0,0,0,0.5);
    }
    .modal-btn {
        background: var(--bg-light); border: 1px solid rgba(255,255,255,0.12); padding: 8px; border-radius: 8px; cursor: pointer; color: var(--text-primary);
        display:inline-flex; align-items:center; justify-content:center; gap:6px; font-size:13px;
        transition: background 0.15s, transform 0.15s;
    }
    .modal-btn:hover { background: var(--bg-light); border-color: var(--accent-main); }
    .modal-btn:active { transform: translateY(1px); }

    .se-ctrls {
        position: fixed; left: 22px; bottom: 22px; display: none; gap: 8px;
        background: rgba(6,10,16,0.8); padding: 10px; border-radius: 10px; backdrop-filter: blur(6px);
        border: 1px solid rgba(255,255,255,0.08); z-index: 2200; color: var(--text-primary);
        font-size: 13px; align-items: center;
    }
    .se-ctrls select {
        background: var(--bg-surface); color: var(--text-primary);
        border: 1px solid rgba(255,255,255,0.12); padding: 6px; border-radius: 8px; font-size: 13px;
        cursor: pointer;
    }
    .se-ctrls label { font-size:12px; color:var(--text-secondary); margin-right:6px; }

    .theme-button.active {
        border-color: var(--accent-secondary) !important;
        background-color: var(--accent-main) !important;
        color: var(--bg-primary) !important;
        box-shadow: 0 0 10px var(--accent-main) !important;
    }

    </style>
</head>
<body class="h-screen flex flex-col antialiased" id="appBody">
    <header class="w-full flex justify-center py-2 bg-black/50 backdrop-blur-sm border-b border-white/10 shadow-lg fixed top-0 z-50">
        <nav class="flex space-x-4 sm:space-x-8 items-center h-10">

            <a href="javascript:switchPage('movies')" id="nav-movies" class="nav-link text-white/80 hover:text-white transition p-2 rounded-lg hover:bg-white/10" aria-label="Movies">
                <i data-lucide="clapperboard" class="w-6 h-6 nav-link-icon"></i>
            </a>
            <a href="javascript:switchPage('tv')" id="nav-tv" class="nav-link text-white/80 hover:text-white transition p-2 rounded-lg hover:bg-white/10" aria-label="TV Shows">
                <i data-lucide="monitor-dot" class="w-6 h-6 nav-link-icon"></i>
            </a>
            <a href="javascript:switchPage('settings')" id="nav-settings" class="nav-link text-white/80 hover:text-white transition p-2 rounded-lg hover:bg-white/10" aria-label="Settings">
                <i data-lucide="settings" class="w-6 h-6 nav-link-icon"></i>
            </a>
        </nav>
    </header>
    <div id="app-container">
        <main id="content-viewport">

            <div id="home-page" class="content-page active home-page flex items-center justify-center relative">
                <div class="logo-container">
                    <div class="glowing-ring"></div>

                    <div class="flex flex-col items-center">
                        <h1 class="logo-word kaidens-text -mb-16 sm:-mb-24 scale-105">kaiden's</h1>
                        <h2 class="logo-word cinema-text mt-8 sm:mt-12">cinema</h2>
                    </div>
                    <p class="text-xl text-gray-400 mt-12 z-10 font-bold tracking-widest"> </p>
                </div>
            </div>

             <div id="credits-page" class="content-page">
                <h1 class="text-3xl font-bold mb-6 text-white"><i data-lucide="users" class="w-6 h-6 inline-block mr-2"></i> Credits</h1>
                <div class="max-w-4xl text-gray-400">
                    <p class="mb-4">made by a lot of people</p>
                    <h3 class="text-xl font-semibold text-white mt-4 mb-2">Design & Tech</h3>
                    <ul class="list-disc list-inside ml-4">
                        <li>im not gonna mention their names cus they problay dont like that</li>
                    </ul>
                </div>
            </div>


<div id="movies-page" class="content-page">
        <h1 class="text-3xl font-bold mb-6 text-white text-center">
            <i data-lucide="clapperboard" class="w-6 h-6 inline-block mr-2 text-red-500"></i>
            Movies
        </h1>
        <div class="flex flex-col md:flex-row gap-4 mb-8 max-w-4xl mx-auto w-full">
            <div class="relative w-full md:w-2/3">
                <input type="text" id="movieSearch" placeholder="Search movies by title..."
                        oninput="filterContent('movie')"
                        class="w-full p-3 pl-10 rounded-xl bg-gray-800 border border-gray-700 text-white placeholder-gray-400 focus:ring-2 focus:ring-accent-main outline-none">
                <i data-lucide="search" class="w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            </div>
            <select id="movieGenreFilter" onchange="filterContent('movie')"
                    class="w-full md:w-1/3 p-3 rounded-xl bg-gray-800 border border-gray-700 text-white focus:ring-2 focus:ring-accent-main outline-none appearance-none cursor-pointer">
            </select>
        </div>


        <div class="grid" id="movieGrid">
            <button class="tmdb-card" data-type="movie" data-id="278" data-genres="Drama,Crime" aria-label="The Shawshank Redemption"></button>
            <button class="tmdb-card" data-type="movie" data-id="238" data-genres="Crime,Drama" aria-label="The Godfather"></button>
            <button class="tmdb-card" data-type="movie" data-id="240" data-genres="Crime,Drama" aria-label="The Godfather Part II"></button>
            <button class="tmdb-card" data-type="movie" data-id="680" data-genres="Crime,Drama" aria-label="Pulp Fiction"></button>
            <button class="tmdb-card" data-type="movie" data-id="550" data-genres="Drama,Thriller" aria-label="Fight Club"></button>
            <button class="tmdb-card" data-type="movie" data-id="807" data-genres="Crime,Mystery,Thriller" aria-label="Se7en"></button>
            <button class="tmdb-card" data-type="movie" data-id="1124" data-genres="Drama,Mystery,Thriller" aria-label="The Prestige"></button>
            <button class="tmdb-card" data-type="movie" data-id="27205" data-genres="Action,Sci-Fi,Thriller" aria-label="Inception"></button>
            <button class="tmdb-card" data-type="movie" data-id="157336" data-genres="Sci-Fi,Adventure,Drama" aria-label="Interstellar"></button>
            <button class="tmdb-card" data-type="movie" data-id="872585" data-genres="Drama,History" aria-label="Oppenheimer"></button>
            <button class="tmdb-card" data-type="movie" data-id="603" data-genres="Action,Sci-Fi" aria-label="The Matrix"></button>
            <button class="tmdb-card" data-type="movie" data-id="37165" data-genres="Drama,Sci-Fi" aria-label="The Truman Show"></button>
            <button class="tmdb-card" data-type="movie" data-id="13" data-genres="Drama,Romance" aria-label="Forrest Gump"></button>
            <button class="tmdb-card" data-type="movie" data-id="98" data-genres="Action,Adventure,Drama" aria-label="Gladiator"></button>
            <button class="tmdb-card" data-type="movie" data-id="597" data-genres="Drama,Romance,History" aria-label="Titanic"></button>
            <button class="tmdb-card" data-type="movie" data-id="424" data-genres="Drama,History,War" aria-label="Schindler's List"></button>
            <button class="tmdb-card" data-type="movie" data-id="497" data-genres="Drama,Fantasy" aria-label="The Green Mile"></button>
            <button class="tmdb-card" data-type="movie" data-id="857" data-genres="War,Drama" aria-label="Saving Private Ryan"></button>
            <button class="tmdb-card" data-type="movie" data-id="244786" data-genres="Drama" aria-label="Whiplash"></button>
            <button class="tmdb-card" data-type="movie" data-id="496243" data-genres="Drama,Thriller" aria-label="Parasite"></button>
            <button class="tmdb-card" data-type="movie" data-id="313369" data-genres="Drama,Romance,Music" aria-label="La La Land"></button>
            <button class="tmdb-card" data-type="movie" data-id="37799" data-genres="Drama,History" aria-label="The Social Network"></button>
            <button class="tmdb-card" data-type="movie" data-id="398978" data-genres="Crime,Drama,History" aria-label="The Irishman"></button>
            <button class="tmdb-card" data-type="movie" data-id="389" data-genres="Drama" aria-label="12 Angry Men"></button>
            <button class="tmdb-card" data-type="movie" data-id="120" data-genres="Adventure,Fantasy,Action" aria-label="The Lord of the Rings: The Fellowship of the Ring"></button>
            <button class="tmdb-card" data-type="movie" data-id="121" data-genres="Adventure,Fantasy,Action" aria-label="The Lord of the Rings: The Two Towers"></button>
            <button class="tmdb-card" data-type="movie" data-id="122" data-genres="Adventure,Fantasy,Action" aria-label="The Lord of the Rings: The Return of the King"></button>
            <button class="tmdb-card" data-type="movie" data-id="671" data-genres="Fantasy,Adventure,Family" aria-label="Harry Potter and the Sorcerer's Stone"></button>
            <button class="tmdb-card" data-type="movie" data-id="672" data-genres="Fantasy,Adventure,Family" aria-label="Harry Potter and the Chamber of Secrets"></button>
            <button class="tmdb-card" data-type="movie" data-id="673" data-genres="Fantasy,Adventure,Family" aria-label="Harry Potter and the Prisoner of Azkaban"></button>
            <button class="tmdb-card" data-type="movie" data-id="674" data-genres="Fantasy,Adventure,Family" aria-label="Harry Potter and the Goblet of Fire"></button>
            <button class="tmdb-card" data-type="movie" data-id="675" data-genres="Fantasy,Adventure,Family" aria-label="Harry Potter and the Order of the Phoenix"></button>
            <button class="tmdb-card" data-type="movie" data-id="767" data-genres="Fantasy,Adventure,Family" aria-label="Harry Potter and the Half-Blood Prince"></button>
            <button class="tmdb-card" data-type="movie" data-id="12444" data-genres="Fantasy,Adventure,Family" aria-label="Harry Potter and the Deathly Hallows: Part 1"></button>
            <button class="tmdb-card" data-type="movie" data-id="12445" data-genres="Fantasy,Adventure,Family" aria-label="Harry Potter and the Deathly Hallows: Part 2"></button>
            <button class="tmdb-card" data-type="movie" data-id="19995" data-genres="Sci-Fi,Action,Adventure" aria-label="Avatar"></button>
            <button class="tmdb-card" data-type="movie" data-id="76600" data-genres="Sci-Fi,Adventure,Fantasy" aria-label="Avatar: The Way of Water"></button>
            <button class="tmdb-card" data-type="movie" data-id="438631" data-genres="Sci-Fi,Adventure,Drama" aria-label="Dune"></button>
            <button class="tmdb-card" data-type="movie" data-id="693134" data-genres="Sci-Fi,Adventure,Action" aria-label="Dune: Part Two"></button>
            <button class="tmdb-card" data-type="movie" data-id="140607" data-genres="Sci-Fi,Action,Adventure" aria-label="Star Wars: The Force Awakens"></button>
            <button class="tmdb-card" data-type="movie" data-id="181808" data-genres="Sci-Fi,Action,Adventure" aria-label="Star Wars: The Last Jedi"></button>
            <button class="tmdb-card" data-type="movie" data-id="181812" data-genres="Sci-Fi,Action,Adventure" aria-label="Star Wars: The Rise of Skywalker"></button>
            <button class="tmdb-card" data-type="movie" data-id="1891" data-genres="Sci-Fi,Adventure,Action" aria-label="The Empire Strikes Back"></button>
            <button class="tmdb-card" data-type="movie" data-id="105" data-genres="Adventure,Comedy,Sci-Fi" aria-label="Back to the Future"></button>
            <button class="tmdb-card" data-type="movie" data-id="335984" data-genres="Sci-Fi,Thriller,Drama" aria-label="Blade Runner 2049"></button>
            <button class="tmdb-card" data-type="movie" data-id="76341" data-genres="Action,Sci-Fi,Adventure" aria-label="Mad Max: Fury Road"></button>
            <button class="tmdb-card" data-type="movie" data-id="667538" data-genres="Sci-Fi,Action,Adventure" aria-label="Transformers: Rise of the Beasts"></button>
            <button class="tmdb-card" data-type="movie" data-id="848326" data-genres="Sci-Fi,Action" aria-label="Rebel Moon"></button>
            <button class="tmdb-card" data-type="movie" data-id="617126" data-genres="Science,Adventure" aria-label="The Fantastic 4: First Steps"></button>
            <button class="tmdb-card" data-type="movie" data-id="10196" data-genres="Action,Fantasy" aria-label="The Last Airbender"></button>
            <button class="tmdb-card" data-type="movie" data-id="1771" data-genres="Action,Adventure,Sci-Fi" aria-label="Captain America: The First Avenger"></button>
            <button class="tmdb-card" data-type="movie" data-id="24428" data-genres="Action,Sci-Fi,Adventure" aria-label="The Avengers"></button>
            <button class="tmdb-card" data-type="movie" data-id="99861" data-genres="Action,Sci-Fi,Adventure" aria-label="Avengers: Age of Ultron"></button>
            <button class="tmdb-card" data-type="movie" data-id="118340" data-genres="Sci-Fi,Action,Adventure" aria-label="Guardians of the Galaxy"></button>
            <button class="tmdb-card" data-type="movie" data-id="283995" data-genres="Sci-Fi,Action,Adventure" aria-label="Guardians of the Galaxy Vol. 2"></button>
            <button class="tmdb-card" data-type="movie" data-id="284052" data-genres="Fantasy,Action,Adventure" aria-label="Doctor Strange"></button>
            <button class="tmdb-card" data-type="movie" data-id="559" data-genres="Action,Adventure,Sci-Fi" aria-label="Spider-Man 3"></button>
            <button class="tmdb-card" data-type="movie" data-id="315635" data-genres="Action,Sci-Fi,Adventure" aria-label="Spider-Man: Homecoming"></button>
            <button class="tmdb-card" data-type="movie" data-id="429617" data-genres="Action,Sci-Fi,Adventure" aria-label="Spider-Man: Far From Home"></button>
            <button class="tmdb-card" data-type="movie" data-id="497698" data-genres="Action,Sci-Fi,Thriller" aria-label="Black Widow"></button>
            <button class="tmdb-card" data-type="movie" data-id="299536" data-genres="Action,Sci-Fi,Adventure" aria-label="Avengers: Infinity War"></button>
            <button class="tmdb-card" data-type="movie" data-id="299534" data-genres="Action,Sci-Fi,Adventure" aria-label="Avengers: Endgame"></button>
            <button class="tmdb-card" data-type="movie" data-id="634649" data-genres="Action,Sci-Fi,Adventure" aria-label="Spider-Man: No Way Home"></button>
            <button class="tmdb-card" data-type="movie" data-id="505642" data-genres="Action,Adventure,Sci-Fi" aria-label="Black Panther: Wakanda Forever"></button>
            <button class="tmdb-card" data-type="movie" data-id="453395" data-genres="Fantasy,Action,Adventure" aria-label="Doctor Strange in the Multiverse of Madness"></button>
            <button class="tmdb-card" data-type="movie" data-id="155" data-genres="Action,Crime,Drama" aria-label="The Dark Knight"></button>
            <button class="tmdb-card" data-type="movie" data-id="49026" data-genres="Action,Thriller,Crime" aria-label="The Dark Knight Rises"></button>
            <button class="tmdb-card" data-type="movie" data-id="475557" data-genres="Crime,Drama,Thriller" aria-label="Joker (2019)"></button>
            <button class="tmdb-card" data-type="movie" data-id="1061474" data-genres="Science,Fiction,Adventure,Action" aria-label="Superman"></button>
            <button class="tmdb-card" data-type="movie" data-id="207703" data-genres="Crime,Comedy,Action" aria-label="Kingsman: The Secret Service"></button>
            <button class="tmdb-card" data-type="movie" data-id="603692" data-genres="Action,Thriller,Crime" aria-label="John Wick: Chapter 4"></button>
            <button class="tmdb-card" data-type="movie" data-id="615457" data-genres="Action,Thriller" aria-label="Nobody"></button>
            <button class="tmdb-card" data-type="movie" data-id="1007734" data-genres="Action,Thriller" aria-label="Nobody 2"></button>
            <button class="tmdb-card" data-type="movie" data-id="545609" data-genres="Action,Thriller" aria-label="Extraction"></button>
            <button class="tmdb-card" data-type="movie" data-id="575264" data-genres="Action,Thriller,Adventure" aria-label="Mission Impossible: Dead Reckoning"></button>
            <button class="tmdb-card" data-type="movie" data-id="361743" data-genres="Action,Drama" aria-label="Top Gun: Maverick"></button>
            <button class="tmdb-card" data-type="movie" data-id="1271" data-genres="Action,War" aria-label="300"></button>
            <button class="tmdb-card" data-type="movie" data-id="677179" data-genres="Drama,Action" aria-label="Creed III"></button>
            <button class="tmdb-card" data-type="movie" data-id="949" data-genres="Crime,Drama,Action" aria-label="Heat"></button>
            <button class="tmdb-card" data-type="movie" data-id="24" data-genres="Action,Crime,Thriller" aria-label="Kill Bill: Vol. 1"></button>
            <button class="tmdb-card" data-type="movie" data-id="500" data-genres="Crime,Thriller" aria-label="Reservoir Dogs"></button>
            <button class="tmdb-card" data-type="movie" data-id="274" data-genres="Drama,Crime,Thriller" aria-label="The Silence of the Lambs"></button>
            <button class="tmdb-card" data-type="movie" data-id="1359" data-genres="Thriller,Drama,Crime" aria-label="American Psycho"></button>
            <button class="tmdb-card" data-type="movie" data-id="670" data-genres="Action,Drama,Mystery" aria-label="Oldboy (2003)"></button>
            <button class="tmdb-card" data-type="movie" data-id="6977" data-genres="Crime,Drama,Thriller" aria-label="No Country for Old Men"></button>
            <button class="tmdb-card" data-type="movie" data-id="385687" data-genres="Action,Thriller,Crime" aria-label="Fast & Furious"></button>
            <button class="tmdb-card" data-type="movie" data-id="168259" data-genres="Action,Thriller" aria-label="Furious 7"></button>
            <button class="tmdb-card" data-type="movie" data-id="346364" data-genres="Horror,Thriller" aria-label="IT"></button>
            <button class="tmdb-card" data-type="movie" data-id="646385" data-genres="Horror,Mystery,Thriller" aria-label="Scream"></button>
            <button class="tmdb-card" data-type="movie" data-id="756999" data-genres="Horror,Thriller" aria-label="The Black Phone"></button>
            <button class="tmdb-card" data-type="movie" data-id="1197137" data-genres="Horror,Thriller" aria-label="The Black Phone 2"></button>
            <button class="tmdb-card" data-type="movie" data-id="536554" data-genres="Horror,Thriller" aria-label="M3GAN"></button>
            <button class="tmdb-card" data-type="movie" data-id="1071585" data-genres="Horror,Thriller" aria-label="M3GAN 2.0"></button>
            <button class="tmdb-card" data-type="movie" data-id="507089" data-genres="Horror,Thriller" aria-label="Five Night's at Freddy's"></button>
            <button class="tmdb-card" data-type="movie" data-id="23827" data-genres="Horror,Mystery" aria-label="Paranormal Activity"></button>
            <button class="tmdb-card" data-type="movie" data-id="1078605" data-genres="Horror,Mystery" aria-label="Weapons"></button>
            <button class="tmdb-card" data-type="movie" data-id="345940" data-genres="Sci-Fi,Action,Horror" aria-label="The Meg"></button>
            <button class="tmdb-card" data-type="movie" data-id="615656" data-genres="Sci-Fi,Action,Horror" aria-label="Meg 2: The Trench"></button>
            <button class="tmdb-card" data-type="movie" data-id="9532" data-genres="Horror,Thriller,Supernatural" aria-label="Final Destination"></button>
            <button class="tmdb-card" data-type="movie" data-id="9358" data-genres="Horror,Thriller,Supernatural" aria-label="Final Destination 2"></button>
            <button class="tmdb-card" data-type="movie" data-id="9286" data-genres="Horror,Thriller,Supernatural" aria-label="Final Destination 3"></button>
            <button class="tmdb-card" data-type="movie" data-id="19912" data-genres="Horror,Thriller,Supernatural" aria-label="The Final Destination"></button>
            <button class="tmdb-card" data-type="movie" data-id="55779" data-genres="Horror,Thriller,Supernatural" aria-label="Final Destination 5"></button>
            <button class="tmdb-card" data-type="movie" data-id="574475" data-genres="Horror,Thriller,Supernatural" aria-label="Final Destination Bloodlines"></button>
            <button class="tmdb-card" data-type="movie" data-id="948" data-genres="Horror,Slasher" aria-label="Halloween (1978)"></button>
            <button class="tmdb-card" data-type="movie" data-id="11281" data-genres="Horror,Slasher" aria-label="Halloween II (1981)"></button>
            <button class="tmdb-card" data-type="movie" data-id="10676" data-genres="Horror,Science Fiction" aria-label="Halloween III: Season of the Witch (1982)"></button>
            <button class="tmdb-card" data-type="movie" data-id="11357" data-genres="Horror,Slasher" aria-label="Halloween 4: The Return of Michael Myers (1988)"></button>
            <button class="tmdb-card" data-type="movie" data-id="11361" data-genres="Horror,Slasher" aria-label="Halloween 5: The Revenge of Michael Myers (1989)"></button>
            <button class="tmdb-card" data-type="movie" data-id="10987" data-genres="Horror,Thriller" aria-label="Halloween: The Curse of Michael Myers (1995)"></button>
            <button class="tmdb-card" data-type="movie" data-id="11675" data-genres="Horror,Thriller" aria-label="Halloween H20: 20 Years Later (1998)"></button>
            <button class="tmdb-card" data-type="movie" data-id="11442" data-genres="Horror,Slasher" aria-label="Halloween: Resurrection (2002)"></button>
            <button class="tmdb-card" data-type="movie" data-id="2082" data-genres="Horror,Slasher" aria-label="Halloween (2007) — Rob Zombie"></button>
            <button class="tmdb-card" data-type="movie" data-id="24150" data-genres="Horror,Slasher" aria-label="Halloween II (2009) — Rob Zombie"></button>
            <button class="tmdb-card" data-type="movie" data-id="424139" data-genres="Horror,Thriller" aria-label="Halloween (2018)"></button>
            <button class="tmdb-card" data-type="movie" data-id="610253" data-genres="Horror,Slasher" aria-label="Halloween Kills (2021)"></button>
            <button class="tmdb-card" data-type="movie" data-id="616820" data-genres="Horror,Thriller" aria-label="Halloween Ends (2022)"></button>
            <button class="tmdb-card" data-type="movie" data-id="8467" data-genres="Comedy" aria-label="Dumb and Dumber"></button>
            <button class="tmdb-card" data-type="movie" data-id="100042" data-genres="Comedy" aria-label="Dumb and Dumber To"></button>
            <button class="tmdb-card" data-type="movie" data-id="4247" data-genres="Comedy" aria-label="Scary Movie"></button>
            <button class="tmdb-card" data-type="movie" data-id="4248" data-genres="Comedy" aria-label="Scary Movie 2"></button>
            <button class="tmdb-card" data-type="movie" data-id="4256" data-genres="Comedy" aria-label="Scary Movie 3"></button>
            <button class="tmdb-card" data-type="movie" data-id="4257" data-genres="Comedy" aria-label="Scary Movie 4"></button>
            <button class="tmdb-card" data-type="movie" data-id="4258" data-genres="Comedy" aria-label="Scary Movie 5"></button>
            <button class="tmdb-card" data-type="movie" data-id="38365" data-genres="Comedy,Family" aria-label="Grown Ups"></button>
            <button class="tmdb-card" data-type="movie" data-id="109418" data-genres="Comedy,Family" aria-label="Grown Ups 2"></button>
            <button class="tmdb-card" data-type="movie" data-id="33217" data-genres="Comedy,Family" aria-label="Diary of a Wimpy Kid (2010)"></button>
            <button class="tmdb-card" data-type="movie" data-id="60307" data-genres="Comedy,Family" aria-label="Diary of a Wimpy Kid: Rodrick Rules (2011)"></button>
            <button class="tmdb-card" data-type="movie" data-id="82650" data-genres="Comedy,Family" aria-label="Diary of a Wimpy Kid: Dog Days (2012)"></button>
            <button class="tmdb-card" data-type="movie" data-id="417830" data-genres="Comedy,Family,Teen" aria-label="Diary of a Wimpy Kid: The Long Haul (2017)"></button>
            <button class="tmdb-card" data-type="movie" data-id="774741" data-genres="Animation,Comedy,Family" aria-label="Diary of a Wimpy Kid (2021) — animated"></button>
            <button class="tmdb-card" data-type="movie" data-id="897192" data-genres="Animation,Comedy,Family" aria-label="Diary of a Wimpy Kid: Rodrick Rules (2022) — animated"></button>
            <button class="tmdb-card" data-type="movie" data-id="1123093" data-genres="Animation,Comedy,Family" aria-label="Diary of a Wimpy Kid Christmas: Cabin Fever (2023)"></button>
            <button class="tmdb-card" data-type="movie" data-id="76492" data-genres="Animation,Comedy,Family,Fantasy" aria-label="Hotel Transylvania"></button>
            <button class="tmdb-card" data-type="movie" data-id="159824" data-genres="Animation,Comedy,Family,Fantasy" aria-label="Hotel Transylvania 2"></button>
            <button class="tmdb-card" data-type="movie" data-id="400155" data-genres="Animation,Comedy,Family,Fantasy" aria-label="Hotel Transylvania 3"></button>
            <button class="tmdb-card" data-type="movie" data-id="585083" data-genres="Animation,Comedy,Family,Fantasy" aria-label="Hotel Transylvania: Transformania"></button>
            <button class="tmdb-card" data-type="movie" data-id="9502" data-genres="Animation,Family,Comedy,Action,Adventure" aria-label="Kung Fu Panda"></button>
            <button class="tmdb-card" data-type="movie" data-id="49444" data-genres="Animation,Family,Comedy,Action,Adventure" aria-label="Kung Fu Panda 2"></button>
            <button class="tmdb-card" data-type="movie" data-id="140300" data-genres="Animation,Family,Comedy,Action,Adventure" aria-label="Kung Fu Panda 3"></button>
            <button class="tmdb-card" data-type="movie" data-id="1011985" data-genres="Animation,Family,Comedy,Action,Adventure" aria-label="Kung Fu Panda 4"></button>
            <button class="tmdb-card" data-type="movie" data-id="11836" data-genres="Family,Comedy,Adventure,Animation" aria-label="The Spongebob Squarepants Movie"></button>
            <button class="tmdb-card" data-type="movie" data-id="228165" data-genres="Family,Comedy,Adventure,Animation" aria-label="The SpongeBob Movie: Sponge Out of Water"></button>
            <button class="tmdb-card" data-type="movie" data-id="1104845" data-genres="Animation,Comedy" aria-label="Plankton: The Movie"></button>
            <button class="tmdb-card" data-type="movie" data-id="12" data-genres="Animation,Family,Comedy" aria-label="Finding Nemo"></button>
            <button class="tmdb-card" data-type="movie" data-id="127380" data-genres="Animation,Family,Comedy" aria-label="Finding Dory"></button>
            <button class="tmdb-card" data-type="movie" data-id="629542" data-genres="Family,Comedy,Crime,Action,Adventure,Animation" aria-label="The Bad Guys"></button>
            <button class="tmdb-card" data-type="movie" data-id="1175942" data-genres="Family,Comedy,Crime,Action,Adventure,Animation" aria-label="The Bad Guys 2"></button>
            <button class="tmdb-card" data-type="movie" data-id="502356" data-genres="Animation,Adventure,Comedy" aria-label="The Super Mario Bros Movie"></button>
            <button class="tmdb-card" data-type="movie" data-id="150540" data-genres="Animation,Comedy,Family" aria-label="Inside Out"></button>
            <button class="tmdb-card" data-type="movie" data-id="277834" data-genres="Animation,Adventure,Family" aria-label="Moana"></button>
            <button class="tmdb-card" data-type="movie" data-id="1241982" data-genres="Animation,Adventure,Family" aria-label="Moana 2"></button>
            <button class="tmdb-card" data-type="movie" data-id="354912" data-genres="Animation,Family,Fantasy" aria-label="Coco"></button>
            <button class="tmdb-card" data-type="movie" data-id="269149" data-genres="Animation,Comedy,Family" aria-label="Zootopia"></button>
            <button class="tmdb-card" data-type="movie" data-id="328111" data-genres="Animation,Comedy,Family" aria-label="The Secret Life of Pets"></button>
            <button class="tmdb-card" data-type="movie" data-id="137106" data-genres="Animation,Adventure,Comedy" aria-label="The Lego Movie"></button>
            <button class="tmdb-card" data-type="movie" data-id="1022787" data-genres="Family,Comedy,Adventure,Animation,Science" aria-label="Elio"></button>
            <button class="tmdb-card" data-type="movie" data-id="227973" data-genres="Animation,Family" aria-label="The Peanuts Movie"></button>
            <button class="tmdb-card" data-type="movie" data-id="268531" data-genres="Animation,Comedy,Family" aria-label="Captain Underpants: The First Epic Movie"></button>
            <button class="tmdb-card" data-type="movie" data-id="14836" data-genres="Animation,Fantasy,Thriller" aria-label="Coraline"></button>
            <button class="tmdb-card" data-type="movie" data-id="129" data-genres="Animation,Fantasy,Adventure" aria-label="Spirited Away"></button>
            <button class="tmdb-card" data-type="movie" data-id="378064" data-genres="Drama,Animation,Romance" aria-label="A Silent Voice"></button>
            <button class="tmdb-card" data-type="movie" data-id="116149" data-genres="Family,Comedy,Adventure" aria-label="Paddington"></button>
            <button class="tmdb-card" data-type="movie" data-id="77174" data-genres="Family,Adventure,Comedy" aria-label="ParaNorman"></button>
            <button class="tmdb-card" data-type="movie" data-id="346698" data-genres="Comedy,Adventure,Fantasy" aria-label="Barbie"></button>
            <button class="tmdb-card" data-type="movie" data-id="310" data-genres="Comedy,Fantasy" aria-label="Bruce Almighty"></button>
            <button class="tmdb-card" data-type="movie" data-id="3049" data-genres="Comedy,Crime" aria-label="Ace Ventura: Pet Detective"></button>
            <button class="tmdb-card" data-type="movie" data-id="12133" data-genres="Comedy" aria-label="Step Brothers"></button>
            <button class="tmdb-card" data-type="movie" data-id="8363" data-genres="Comedy" aria-label="Superbad"></button>
            <button class="tmdb-card" data-type="movie" data-id="120467" data-genres="Comedy,Drama" aria-label="The Grand Budapest Hotel"></button>
            <button class="tmdb-card" data-type="movie" data-id="194" data-genres="Comedy,Romance" aria-label="Amélie"></button>
            <button class="tmdb-card" data-type="movie" data-id="515001" data-genres="Comedy,War,Drama" aria-label="JoJo Rabbit"></button>
            <button class="tmdb-card" data-type="movie" data-id="14574" data-genres="War,Drama" aria-label="The Boy in the Striped Pajamas"></button>
            <button class="tmdb-card" data-type="movie" data-id="598" data-genres="Crime,Drama" aria-label="City of God"></button>
            <button class="tmdb-card" data-type="movie" data-id="1417" data-genres="Fantasy,Drama,War" aria-label="Pan's Labyrinth"></button>
            <button class="tmdb-card" data-type="movie" data-id="619264" data-genres="Drama,Science,Thriller" aria-label="The Platform"></button>
            <button class="tmdb-card" data-type="movie" data-id="1125510" data-genres="Drama,Science,Thriller" aria-label="The Platform 2"></button>
            <button class="tmdb-card" data-type="movie" data-id="950387" data-genres="Family,Fantasy,Comedy,Adventure" aria-label="The Minecraft Movie"></button>
            <button class="tmdb-card" data-type="movie" data-id="10588" data-genres="Family,Comedy,Adventure,Fantasy" aria-label="The Cat in the Hat"></button>
            <button class="tmdb-card" data-type="movie" data-id="1311031" data-genres="Animation,Action,Fantasy,Thriller" aria-label="Demon Slayer: Kimetsu no Yaiba Infinity Castle"></button>
            <button class="tmdb-card" data-type="movie" data-id="803796" data-genres="Fantasy,Music,Comedy,Animation" aria-label="KPop Demon Hunters"></button>

        </div>
    </div>

    <!-- tv -->
    <div id="tv-page" class="content-page">
        <h1 class="text-3xl font-bold mb-6 text-white text-center">
            <i data-lucide="monitor-dot" class="w-6 h-6 inline-block mr-2 text-cyan-400"></i>
            TV Shows
        </h1>
        <div class="flex flex-col md:flex-row gap-4 mb-8 max-w-4xl mx-auto w-full">
            <div class="relative w-full md:w-2/3">
                <input type="text" id="tvSearch" placeholder="Search TV shows by title..."
                        oninput="filterContent('tv')"
                        class="w-full p-3 pl-10 rounded-xl bg-gray-800 border border-gray-700 text-white placeholder-gray-400 focus:ring-2 focus:ring-accent-main outline-none">
                <i data-lucide="search" class="w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            </div>
            <select id="tvGenreFilter" onchange="filterContent('tv')"
                    class="w-full md:w-1/3 p-3 rounded-xl bg-gray-800 border border-gray-700 text-white focus:ring-2 focus:ring-accent-main outline-none appearance-none cursor-pointer">
            </select>
        </div>


        <div class="grid" id="tvGrid">
            <button class="tmdb-card" data-type="tv" data-id="1399" data-genres="Fantasy,Drama,Action" aria-label="Game of Thrones"></button>
            <button class="tmdb-card" data-type="tv" data-id="100088" data-genres="Drama,Action,Horror" aria-label="The Last of Us"></button>
            <button class="tmdb-card" data-type="tv" data-id="1402" data-genres="Drama,Horror,Action" aria-label="The Walking Dead"></button>
            <button class="tmdb-card" data-type="tv" data-id="66732" data-genres="Mystery,Drama,Sci-Fi" aria-label="Stranger Things"></button>
            <button class="tmdb-card" data-type="tv" data-id="87108" data-genres="Drama,History" aria-label="Chernobyl"></button>
            <button class="tmdb-card" data-type="tv" data-id="87739" data-genres="Drama" aria-label="The Queen's Gambit"></button>
            <button class="tmdb-card" data-type="tv" data-id="65494" data-genres="Drama,History" aria-label="The Crown"></button>
            <button class="tmdb-card" data-type="tv" data-id="1396" data-genres="Crime,Drama,Thriller" aria-label="Breaking Bad"></button>
            <button class="tmdb-card" data-type="tv" data-id="60059" data-genres="Crime,Drama" aria-label="Better Call Saul"></button>
            <button class="tmdb-card" data-type="tv" data-id="1398" data-genres="Crime,Drama" aria-label="The Sopranos"></button>
            <button class="tmdb-card" data-type="tv" data-id="1438" data-genres="Crime,Drama,Thriller" aria-label="The Wire"></button>
            <button class="tmdb-card" data-type="tv" data-id="1405" data-genres="Crime,Drama,Thriller" aria-label="Dexter"></button>
            <button class="tmdb-card" data-type="tv" data-id="131927" data-genres="Crime,Drama,Mystery" aria-label="Dexter: New Blood"></button>
            <button class="tmdb-card" data-type="tv" data-id="219937" data-genres="Crime,Drama" aria-label="Dexter: Original Sin"></button>
            <button class="tmdb-card" data-type="tv" data-id="259909" data-genres="Crime,Drama" aria-label="Dexter: Resurrection"></button>
            <button class="tmdb-card" data-type="tv" data-id="46648" data-genres="Crime,Drama,Mystery" aria-label="True Detective"></button>
            <button class="tmdb-card" data-type="tv" data-id="60622" data-genres="Crime,Drama,Comedy" aria-label="Fargo"></button>
            <button class="tmdb-card" data-type="tv" data-id="60574" data-genres="Crime,Drama,Action" aria-label="Peaky Blinders"></button>
            <button class="tmdb-card" data-type="tv" data-id="63351" data-genres="Crime,Drama,History" aria-label="Narcos"></button>
            <button class="tmdb-card" data-type="tv" data-id="71694" data-genres="Crime,Drama" aria-label="Snowfall"></button>
            <button class="tmdb-card" data-type="tv" data-id="1409" data-genres="Crime,Drama,Thriller" aria-label="Sons of Anarchy"></button>
            <button class="tmdb-card" data-type="tv" data-id="71446" data-genres="Crime,Action,Drama" aria-label="Money Heist"></button>
            <button class="tmdb-card" data-type="tv" data-id="42009" data-genres="Sci-Fi,Drama" aria-label="Black Mirror"></button>
            <button class="tmdb-card" data-type="tv" data-id="106379" data-genres="Sci-Fi,Action,Adventure" aria-label="Fallout"></button>
            <button class="tmdb-card" data-type="tv" data-id="4087" data-genres="Mystery,Sci-Fi,Drama" aria-label="The X-Files"></button>
            <button class="tmdb-card" data-type="tv" data-id="1920" data-genres="Drama,Mystery,Thriller" aria-label="Twin Peaks"></button>
            <button class="tmdb-card" data-type="tv" data-id="4607" data-genres="Adventure,Fantasy,Drama" aria-label="Lost"></button>
            <button class="tmdb-card" data-type="tv" data-id="93405" data-genres="Action,Drama,Thriller" aria-label="Squid Game"></button>
            <button class="tmdb-card" data-type="tv" data-id="110316" data-genres="Mystery,Sci-Fi,Action" aria-label="Alice in Borderland"></button>
            <button class="tmdb-card" data-type="tv" data-id="655" data-genres="Sci-Fi,Adventure" aria-label="Star Trek: The Next Generation"></button>
            <button class="tmdb-card" data-type="tv" data-id="76479" data-genres="Action,Sci-Fi" aria-label="The Boys"></button>
            <button class="tmdb-card" data-type="tv" data-id="71912" data-genres="Fantasy,Action,Adventure" aria-label="The Witcher"></button>
            <button class="tmdb-card" data-type="tv" data-id="75006" data-genres="Sci-Fi,Action,Fantasy" aria-label="The Umbrella Academy"></button>
            <button class="tmdb-card" data-type="tv" data-id="84958" data-genres="Sci-Fi,Action,Adventure" aria-label="Loki"></button>
            <button class="tmdb-card" data-type="tv" data-id="82856" data-genres="Sci-Fi,Action,Adventure" aria-label="The Mandalorian"></button>
            <button class="tmdb-card" data-type="tv" data-id="92749" data-genres="Sci-Fi,Action,Adventure" aria-label="Moon Knight"></button>
            <button class="tmdb-card" data-type="tv" data-id="110492" data-genres="Sci-Fi,Action,Comedy" aria-label="Peacemaker"></button>
            <button class="tmdb-card" data-type="tv" data-id="60708" data-genres="Crime,Drama,Action" aria-label="Gotham"></button>
            <button class="tmdb-card" data-type="tv" data-id="1412" data-genres="Action,Crime,Sci-Fi" aria-label="Arrow"></button>
            <button class="tmdb-card" data-type="tv" data-id="60735" data-genres="Action,Sci-Fi,Drama" aria-label="The Flash"></button>
            <button class="tmdb-card" data-type="tv" data-id="77169" data-genres="Action,Drama" aria-label="Cobra Kai"></button>
            <button class="tmdb-card" data-type="tv" data-id="2316" data-genres="Comedy" aria-label="the office"></button>
            <button class="tmdb-card" data-type="tv" data-id="1668" data-genres="Comedy,Romance" aria-label="Friends"></button>
            <button class="tmdb-card" data-type="tv" data-id="1400" data-genres="Comedy" aria-label="Seinfeld"></button>
            <button class="tmdb-card" data-type="tv" data-id="8592" data-genres="Comedy" aria-label="Parks and Recreation"></button>
            <button class="tmdb-card" data-type="tv" data-id="1418" data-genres="Comedy,Romance" aria-label="The Big Bang Theory"></button>
            <button class="tmdb-card" data-type="tv" data-id="3452" data-genres="Comedy" aria-label="Frasier"></button>
            <button class="tmdb-card" data-type="tv" data-id="4589" data-genres="Comedy" aria-label="Arrested Development"></button>
            <button class="tmdb-card" data-type="tv" data-id="2004" data-genres="Comedy,Family" aria-label="Malcolm in the Middle"></button>
            <button class="tmdb-card" data-type="tv" data-id="1422" data-genres="Comedy,Family" aria-label="The Middle"></button>
            <button class="tmdb-card" data-type="tv" data-id="71728" data-genres="Comedy,Family" aria-label="Young Sheldon"></button>
            <button class="tmdb-card" data-type="tv" data-id="252" data-genres="Comedy,Drama" aria-label="Everybody Hates Chris"></button>
            <button class="tmdb-card" data-type="tv" data-id="34307" data-genres="Drama,Comedy" aria-label="Shameless"></button>
            <button class="tmdb-card" data-type="tv" data-id="285552" data-genres="Comedy,Drama" aria-label="The New Norm"></button>
            <button class="tmdb-card" data-type="tv" data-id="59186" data-genres="Comedy" aria-label="Impractical Jokers"></button>
            <button class="tmdb-card" data-type="tv" data-id="1408" data-genres="Drama,Mystery" aria-label="House"></button>
            <button class="tmdb-card" data-type="tv" data-id="71712" data-genres="Drama" aria-label="The Good Doctor"></button>
            <button class="tmdb-card" data-type="tv" data-id="1429" data-genres="Animation,Action,Fantasy" aria-label="Attack on Titan"></button>
            <button class="tmdb-card" data-type="tv" data-id="46260" data-genres="Animation,Action,Adventure" aria-label="Naruto"></button>
            <button class="tmdb-card" data-type="tv" data-id="31910" data-genres="Animation,Action,Adventure" aria-label="Naruto: Shippuden"></button>
            <button class="tmdb-card" data-type="tv" data-id="37854" data-genres="Animation,Action,Adventure" aria-label="One Piece"></button>
            <button class="tmdb-card" data-type="tv" data-id="12971" data-genres="Animation,Action,Fantasy,Adventure" aria-label="Dragon Ball Z"></button>
            <button class="tmdb-card" data-type="tv" data-id="46298" data-genres="Animation,Action,Adventure,Fantasy" aria-label="Hunter X Hunter"></button>
            <button class="tmdb-card" data-type="tv" data-id="114410" data-genres="Animation,Action,Fantasy" aria-label="Chainsaw Man"></button>
            <button class="tmdb-card" data-type="tv" data-id="13916" data-genres="Animation,Mystery,Fantasy" aria-label="Death Note"></button>
            <button class="tmdb-card" data-type="tv" data-id="95557" data-genres="Animation,Action,Sci-Fi" aria-label="Invincible"></button>
            <button class="tmdb-card" data-type="tv" data-id="105248" data-genres="Animation,Sci-Fi,Action" aria-label="Cyberpunk: Edgerunners"></button>
            <button class="tmdb-card" data-type="tv" data-id="2190" data-genres="Animation,Comedy" aria-label="South Park"></button>
            <button class="tmdb-card" data-type="tv" data-id="60625" data-genres="Animation,Comedy,Sci-Fi" aria-label="Rick and Morty"></button>
            <button class="tmdb-card" data-type="tv" data-id="456" data-genres="Animation,Comedy,Family" aria-label="The Simpsons"></button>
            <button class="tmdb-card" data-type="tv" data-id="1434" data-genres="Animation,Comedy" aria-label="Family Guy"></button>
            <button class="tmdb-card" data-type="tv" data-id="1433" data-genres="Animation,Comedy" aria-label="American Dad"></button>
            <button class="tmdb-card" data-type="tv" data-id="615" data-genres="Animation,Comedy,Sci-Fi" aria-label="Futurama"></button>
            <button class="tmdb-card" data-type="tv" data-id="251" data-genres="Animation,Comedy" aria-label="Aqua Teen Hunger Force"></button>
            <button class="tmdb-card" data-type="tv" data-id="126506" data-genres="Animation,Comedy" aria-label="Smiling Friends"></button>
            <button class="tmdb-card" data-type="tv" data-id="387" data-genres="Animation,Kids,Comedy" aria-label="Spongebob Squarepants"></button>
            <button class="tmdb-card" data-type="tv" data-id="40075" data-genres="Mystery,Sci-Fi,Comedy,Animation,Kids" aria-label="Gravity Falls"></button>
            <button class="tmdb-card" data-type="tv" data-id="15260" data-genres="Animation,Fantasy,Adventure" aria-label="Adventure Time"></button>
            <button class="tmdb-card" data-type="tv" data-id="31132" data-genres="Animation,Comedy,Family" aria-label="Regular Show"></button>
            <button class="tmdb-card" data-type="tv" data-id="37606" data-genres="Animation,Comedy,Family" aria-label="The Amazing World of Gumball"></button>
            <button class="tmdb-card" data-type="tv" data-id="63401" data-genres="Animation,Comedy,Kids" aria-label="We Bare Bears"></button>
            <button class="tmdb-card" data-type="tv" data-id="32726" data-genres="Animation,Comedy,Family" aria-label="Bob's Burgers'"></button>
            <button class="tmdb-card" data-type="tv" data-id="68073" data-genres="Animation,Kids,Family" aria-label="The LOUD HOUSE"></button>
            <button class="tmdb-card" data-type="tv" data-id="35094" data-genres="Animation,Kids" aria-label="Wild Kratts"></button>
            <button class="tmdb-card" data-type="tv" data-id="26732" data-genres="Animation,Kids,Comedy,Action,Adventure,Sci-Fi,Fantasy" aria-label="Super Mario World"></button>
            <button class="tmdb-card" data-type="tv" data-id="119051" data-genres="Mystery,Fantasy,Crime" aria-label="Wednesday"></button>

        </div>
    </div>


            <div id="settings-page" class="content-page">
                <h1 class="text-3xl font-bold mb-6 text-white"><i data-lucide="settings" class="w-6 h-6 inline-block mr-2"></i> Appearance & Settings</h1>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">

                    <div class="p-6 rounded-xl bg-gray-900 shadow-xl border border-gray-800">
                        <h3 class="text-xl font-bold text-white mb-4">Theme Selector</h3>

                        <button class="theme-button w-full p-3 mb-3 rounded-lg border-2 border-transparent text-white bg-fuchsia-900 hover:border-fuchsia-500" onclick="changeTheme('cyberpunk')">
                            Cinematic Noir (Default)
                            <div class="h-4 rounded-sm mt-2" style="background-color: #0a0014; border: 1px solid #ff0090;"></div>
                        </button>
                        <button class="theme-button w-full p-3 mb-3 rounded-lg border-2 border-transparent text-white bg-blue-900 hover:border-blue-400" onclick="changeTheme('midnight')">
                            Midnight Blue
                            <div class="h-4 rounded-sm mt-2" style="background-color: #0c1622; border: 1px solid #4686ff;"></div>
                        </button>
                        <button class="theme-button w-full p-3 mb-3 rounded-lg border-2 border-transparent text-white bg-green-700 hover:border-green-400" onclick="changeTheme('spotify')">
                            Spotify Green
                            <div class="h-4 rounded-sm mt-2" style="background-color: #121212; border: 1px solid #1db954;"></div>
                        </button>
                        <button class="theme-button w-full p-3 mb-3 rounded-lg border-2 border-transparent text-white bg-purple-900 hover:border-purple-400" onclick="changeTheme('2022purple')">
                            2022 Purple
                            <div class="h-4 rounded-sm mt-2" style="background-color: #3a0b44; border: 1px solid #9b4dff;"></div>
                        </button>
                        <button class="theme-button w-full p-3 mb-3 rounded-lg border-2 border-transparent text-white bg-red-900 hover:border-red-500" onclick="changeTheme('crimson')">
                            Crimson Noir
                            <div class="h-4 rounded-sm mt-2" style="background-color: #1a0004; border: 1px solid #ff1744;"></div>
                        </button>
                        <button class="theme-button w-full p-3 mb-3 rounded-lg border-2 border-transparent text-white bg-slate-800 hover:border-amber-400" onclick="changeTheme('solarized')">
                            Solarized Dark
                            <div class="h-4 rounded-sm mt-2" style="background-color: #002b36; border: 1px solid #b58900;"></div>
                        </button>
                        <button class="theme-button w-full p-3 mb-3 rounded-lg border-2 border-transparent text-gray-900 bg-gray-100 hover:border-blue-500" onclick="changeTheme('light')">
                            Flashbang (Light)
                            <div class="h-4 rounded-sm mt-2" style="background-color: #f0f0f0; border: 1px solid #3b82f6;"></div>
                        </button>
                    </div>


                    <div class="p-6 rounded-xl bg-gray-900 shadow-xl border border-gray-800">
                        <h3 class="text-xl font-bold text-white mb-4">Tab Cloak & Data Management</h3>
                        <p class="text-gray-400 mb-4">Change the browser tab title and icon using presets below for discretion.</p>
                        <button class="w-full p-3 rounded-lg font-bold bg-cyan-600 text-black hover:bg-cyan-500 mb-3" onclick="tabCloak()">
                            <i data-lucide="eye-off" class="w-5 h-5 inline-block mr-2"></i> Change Tab Title & Icon
                        </button>

                        <div class="mt-8 border-t border-gray-700 pt-4">
                            <h3 class="text-lg font-bold text-white mb-3">Data Management</h3>
                            <button class="w-full p-3 rounded-lg font-bold bg-gray-700 text-white hover:bg-gray-600 mb-3" onclick="loadPrivacy()">
                                View Privacy Policy
                            </button>
                        </div>
                    </div>
                </div>
            </div>

        </main>

    </div>

    <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-hidden="true">
        <div id="modal" class="modal" role="document" aria-modal="true">
            <div class="w-full h-full relative">
                <div class="modal-header" id="modalHeader">
                    <div id="modalTitle" class="modal-title">Title</div>
                    <button id="fullscreenBtn" class="modal-btn" title="Enter fullscreen" aria-pressed="false">
                        <i data-lucide="maximize" class="w-4 h-4"></i>
                    </button>
                    <button id="closeBtn" class="modal-btn" title="Close">
                        <i data-lucide="x" class="w-4 h-4"></i>
                    </button>
                </div>

<iframe id="modalFrame" class="modal-frame"
    src=""
    title="Video frame"
    loading="lazy"
    allowfullscreen
    allow="autoplay; fullscreen; encrypted-media; picture-in-picture">
</iframe>



            </div>
        </div>
    </div>

    <div id="seControls" class="se-ctrls" aria-hidden="true">
        <label for="seasonSelect">Season</label>
        <select id="seasonSelect"></select>
        <label for="episodeSelect">Episode</label>
        <select id="episodeSelect"></select>
    </div>

    <script>
        const modalBackdrop = document.getElementById('modalBackdrop');
        const modal = document.getElementById('modal');
        const modalFrame = document.getElementById('modalFrame');
        const modalTitle = document.getElementById('modalTitle');
        const closeBtn = document.getElementById('closeBtn');
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        const seControls = document.getElementById('seControls');
        const seasonSelect = document.getElementById('seasonSelect');
        const episodeSelect = document.getElementById('episodeSelect');
        const appBody = document.getElementById('appBody');
        const contentViewport = document.getElementById('content-viewport');

        let __TMDB_API_KEY = null;
        let __CURRENT_MODAL_CARD = null;
        const allCardElements = [];
        const GENRES = {
            'movie': ['All Genres', 'Action', 'Adventure', 'Animation', 'Comedy', 'Crime', 'Documentary', 'Drama', 'Fantasy', 'History', 'Horror', 'Mystery', 'Romance', 'Sci-Fi', 'Thriller', 'War', 'Western'],
            'tv': ['All Genres', 'Action', 'Adventure', 'Animation', 'Comedy', 'Crime', 'Drama', 'Family', 'Kids', 'Mystery', 'Sci-Fi', 'Western'],
        };


        async function loadApiKey() {
            try {
                const res = await fetch('./YnJpZGdlYWRkaXRpb25mb290YmFsbGNyZWFtcGFyZW50bG9vc2V0YWlsc3RyaWtlZWE/b2xkZXN0bmV3c2xvd29wcG9zaXRldGFua2Rpc2Vhc2VzaHV0cmFuZ2VlZHVjYXRpb24.json', { cache: 'no-store' });
                if (!res.ok) throw new Error(' ');
                const j = await res.json();
                const candidates = ['api_key','key','tmdb_api_key','TMDB_API_KEY','apiKey','v3_api_key'];
                for (const k of candidates) if (j[k]) return j[k];
                const values = Object.values(j).filter(v => typeof v === 'string' && v.trim());
                if (values.length === 1) return values[0];
                throw new Error('No valid API key found in api/apikey.json. Please ensure it contains a V3 key.');
            } catch (e) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'p-4 my-4 bg-red-900 border border-red-700 text-red-100 rounded-lg max-w-lg mx-auto';
                errorDiv.textContent = ' ';
                contentViewport.prepend(errorDiv);
                throw e;
            }
        }

        function buildVidlinkUrl(type, id, season, episode) {
            if (type === 'tv') {
                const s = parseInt(season || 1, 10) || 1;
                const e = parseInt(episode || 1, 10) || 1;
                return `https://vidlink.pro/tv/${encodeURIComponent(id)}/${s}/${e}?primaryColor=690fb3&secondaryColor=a2a2a2&iconColor=eefdec&icons=vid&player=jw&title=true&poster=true&autoplay=true&nextbutton=true`;
            } else {
                return `https://vidlink.pro/movie/${encodeURIComponent(id)}?primaryColor=690fb3&secondaryColor=a2a2a2&iconColor=eefdec&icons=vid&player=jw&title=true&poster=true&autoplay=true&nextbutton=true`;
            }
        }

        function buildPosterUrl(path, size = 'w500') {
            if (!path) return null;
            const base = 'https://image.tmdb.org/t/p/';
            return base + size + (path.startsWith('/') ? path : '/' + path);
        }

        const THEMES = ['spotify', 'light', '2022purple', 'cyberpunk', 'midnight', 'solarized', 'forest', 'crimson'];

        function changeTheme(themeName, save = true) {
            appBody.classList.remove(...THEMES.map(t => `theme-${t}`));

            const effectiveTheme = THEMES.includes(themeName) ? themeName : 'cyberpunk';

            if (effectiveTheme !== 'forest') {
                appBody.classList.add(`theme-${effectiveTheme}`);
            }

            if (save) {
                localStorage.setItem('theme', effectiveTheme);
            }

            document.querySelectorAll('.theme-button').forEach(btn => {
                btn.classList.remove('active');
                if (btn.onclick.toString().includes(`'${effectiveTheme}'`)) {
                    btn.classList.add('active');
                }
            });
        }

        function populateGenreFilter(type) {
            const filterEl = document.getElementById(`${type}GenreFilter`);
            if (!filterEl) return;

            filterEl.innerHTML = '';
            const genres = GENRES[type] || [];
            
            genres.forEach(genre => {
                const option = document.createElement('option');
                option.value = genre === 'All Genres' ? '' : genre;
                option.textContent = genre;
                filterEl.appendChild(option);
            });
        }

        function filterContent(type) {
            const gridId = `${type}Grid`;
            const searchId = `${type}Search`;
            const filterId = `${type}GenreFilter`;

            const grid = document.getElementById(gridId);
            if (!grid) return;

            const searchTerm = document.getElementById(searchId)?.value.toLowerCase().trim() || '';
            const selectedGenre = document.getElementById(filterId)?.value || '';

            const cards = grid.querySelectorAll('.tmdb-card');

            cards.forEach(card => {
                const title = card.dataset.title ? card.dataset.title.toLowerCase() : '';
                const genres = card.dataset.genres ? card.dataset.genres.toLowerCase().split(',') : [];

                let matchesSearch = true;
                let matchesGenre = true;
                if (searchTerm.length > 0) {
                    matchesSearch = title.includes(searchTerm);
                }
                if (selectedGenre.length > 0) {
                    const normalizedSelectedGenre = selectedGenre.toLowerCase();
                    matchesGenre = genres.some(g => g.trim() === normalizedSelectedGenre);
                }

                if (matchesSearch && matchesGenre) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        }


        function switchPage(pageId, updateHistory = true) {
            document.querySelectorAll('.content-page').forEach(page => page.classList.remove('active'));
            const targetPage = document.getElementById(`${pageId}-page`);
            if (targetPage) {
                targetPage.classList.add('active');
            }

            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            const targetLink = document.getElementById(`nav-${pageId}`);
            if (targetLink) {
                targetLink.classList.add('active');
            }

            contentViewport.scrollTop = 0;

            if (updateHistory) {
                const url = new URL(window.location);
                url.searchParams.set('view', pageId);
                history.pushState(null, '', url.toString());
            }

            if (pageId === 'settings') {
                changeTheme(localStorage.getItem('theme') || 'cyberpunk', false);
            } else if (pageId === 'movies') {
                populateGenreFilter('movie');
                filterContent('movie');
            } else if (pageId === 'tv') {
                populateGenreFilter('tv');
                filterContent('tv');
            }

            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        const tabPresets = [
            { name: "Google Classroom", icon: "https://cdn.worldvectorlogo.com/logos/google-classroom.svg" },
            { name: "Google Drive", icon: "https://ssl.gstatic.com/docs/doclist/images/drive_2022q3_32dp.png" },
            { name: "Schoology", icon: "https://lausdschoology.azurewebsites.net/assets/images/schoology/schoologyLogo.png" },
            { name: "Khan Academy", icon: "https://www.khanacademy.org/images/favicon.ico" },
            { name: "IXL", icon: "https://www.ixl.com/apple-touch-icon.png" },
        ];

        function cloakIcon(url) {
            document.querySelectorAll("link[rel~='icon']").forEach(link => link.remove());
            const iconUrl = (url + "").trim();
            const href = iconUrl.length === 0 ? "favicon.png" : iconUrl;

            const link = document.createElement("link");
            link.rel = "icon";
            link.type = "image/x-icon";
            link.href = href;
            document.head.appendChild(link);

            const iconInput = document.getElementById('tab-icon-input');
            if (iconInput) iconInput.value = href === "favicon.png" ? "" : href;
        }

        function cloakName(string) {
            const title = ((string + "").trim().length === 0) ? "Kaiden's Cinema" : string;
            document.title = title;
            const titleInput = document.getElementById('tab-title-input');
            if (titleInput) titleInput.value = title === "Kaiden's Cinema" ? "" : title;
        }

        function applyPreset(name, iconUrl) {
            cloakName(name);
            cloakIcon(iconUrl);
            setTimeout(closePopup, 300);
        }

        function openPopup(title, contentHTML, allowClose = true, actionButton = null) {
            document.getElementById('popupTitle').textContent = title;
            document.getElementById('popupBody').innerHTML = contentHTML;
            document.getElementById('popupClose').style.display = allowClose ? 'block' : 'none';
            document.getElementById('popupOverlay').style.display = "flex";

            if (actionButton) {
                const actionBtnEl = document.createElement('button');
                actionBtnEl.className = 'w-full p-3 rounded-lg font-bold bg-fuchsia-600 text-white hover:bg-fuchsia-500 mt-4 transition';
                actionBtnEl.textContent = actionButton.text;
                actionBtnEl.onclick = actionButton.action;
                document.getElementById('popupBody').appendChild(actionBtnEl);
            }
        }

        function closePopup() {
            document.getElementById('popupOverlay').style.display = "none";
        }

        function tabCloak() {
            const popupBody = document.getElementById('popupBody');

            const presetButtons = tabPresets.map(p => `
                <button class="w-full p-3 rounded-lg font-bold bg-gray-800 text-white hover:bg-gray-700 transition flex items-center mb-2"
                        onclick="applyPreset('${p.name.replace(/'/g, "\\'")}', '${p.icon.replace(/'/g, "\\'")}')">
                    <img src="${p.icon}" class="w-6 h-6 mr-3 rounded-full" onerror="this.src=' '">
                    ${p.name}
                </button>
            `).join('');

            const content = `
                <div class="mb-6">
                    <h4 class="text-lg font-bold text-white mb-2 border-b border-gray-700 pb-1">Quick Presets</h4>
                    ${presetButtons}
                    <button class="w-full p-3 rounded-lg font-bold bg-red-600 text-white hover:bg-red-500 transition mt-2" onclick="applyPreset('Kaiden\\'s Cinema', '')">
                        Reset to Default
                    </button>
                </div>

                <div class="mb-4">
                    <h4 class="text-lg font-bold text-white mb-2 border-b border-gray-700 pb-1">Custom Cloaking</h4>

                    <label for="tab-title-input" class="font-bold text-white block mb-1">Set Tab Title:</label>
                    <input type="text" id="tab-title-input" placeholder="Enter new tab name..." oninput="cloakName(this.value)" class="w-full bg-gray-800 border border-gray-700 text-white p-2 rounded-lg mb-4 outline-none">

                    <label for="tab-icon-input" class="font-bold text-white block mb-1">Set Tab Icon (URL):</label>
                    <input type="text" id="tab-icon-input" placeholder="Enter new icon URL..." oninput='cloakIcon(this.value)' class="w-full bg-gray-800 border border-gray-700 text-white p-2 rounded-lg mb-4 outline-none">
                </div>
            `;
            openPopup("Tab Cloak Settings", content);


            document.getElementById('tab-title-input').value = document.title === "Kaiden's Cinema" ? '' : document.title;
            const currentIcon = document.querySelector("link[rel~='icon']")?.href;
            if (currentIcon && !currentIcon.endsWith('favicon.png')) {
                document.getElementById('tab-icon-input').value = currentIcon;
            }
        }

        function loadPrivacy() {
            const content = `
                <div class="max-h-96 overflow-y-auto text-gray-400">
                    <h2 class="text-xl font-bold text-white">PRIVACY POLICY</h2>
                    <p class="text-sm mb-3">Last updated October 2025</p>
                    <p class="mb-2">This policy describes how we handle your information when you use Kaiden's Cinema.</p>

                    <h3 class="text-lg font-semibold text-white mt-4 mb-2">Data Processing</h3>
                    <p class="mb-2">We use your <strong>local browser storage</strong> (localStorage) to save your theme choices and keep track of pop-up displays. This data is not saved or sent to our servers.</p>
                    <p class="mb-2">We use <strong>TMDb API</strong> (The Movie Database) to fetch poster images, titles, and TV season information. Due to API rate limits and security constraints in this sandbox environment, the genre data you see is manually added to the HTML and not fetched from the live API.</p>
                </div>
                <button class="w-full p-3 rounded-lg font-bold bg-gray-700 text-white hover:bg-gray-600 mt-4" onclick="closePopup()">Close Policy</button>
            `;
            openPopup("Privacy Policy", content);
        }

        function setupCardDOM(card) {
            card.innerHTML = '';
            const inner = document.createElement('div');
            inner.className = 'tmdb-inner';
            const shine = document.createElement('div');
            shine.className = 'shine';
            const loader = document.createElement('div');
            loader.className = 'loader';
            loader.textContent = 'LOADING...';
            card.appendChild(inner);
            card.appendChild(shine);
            card.appendChild(loader);
        }

        async function fillCard(card, apiKey) {
            const id = card.dataset.id;
            const type = (card.dataset.type || 'movie').toLowerCase();
            const loader = card.querySelector('.loader');
            const inner = card.querySelector('.tmdb-inner');
            inner.innerHTML = '';
            if (loader) loader.style.display = 'flex';

            try {
                const url = `https://api.themoviedb.org/3/${encodeURIComponent(type)}/${encodeURIComponent(id)}?api_key=${encodeURIComponent(apiKey)}`;
                const res = await fetch(url);
                if (!res.ok) {
                    if (res.status === 404) throw new Error(`${type} ID ${id} not found.`);
                    throw new Error('TMDb fetch failed (status ' + res.status + ').');
                }
                const details = await res.json();

                card.dataset.title = details.title || details.name || '';
                card.dataset.posterPath = details.poster_path || details.backdrop_path || '';
                card.dataset.mediaType = type;

                if (type === 'tv') {
                    card.dataset.seasons = JSON.stringify(details.seasons || []);
                    card.dataset.number_of_seasons = details.number_of_seasons || (details.seasons && details.seasons.length) || 0;
                } else {
                    card.dataset.seasons = '';
                    card.dataset.number_of_seasons = '';
                }

                const path = details.poster_path || details.backdrop_path || null;
                if (!path) {
                    const ph = document.createElement('div');
                    ph.className = 'placeholder';
                    ph.textContent = card.dataset.title || 'No Poster';
                    inner.appendChild(ph);
                } else {
                    const img = document.createElement('img');
                    img.className = 'tmdb-img';
                    img.alt = card.dataset.title || 'poster';
                    img.draggable = false;
                    img.src = buildPosterUrl(path, 'w780');
                    inner.appendChild(img);
                }
                card.title = card.dataset.title + ' — click to stream';
                console.log(`[TMDb] Successfully loaded: ${card.dataset.title} (${type}, ID: ${id})`);
            } catch (err) {
                console.error(`[TMDb Error] Failed to load ${card.dataset.title || card.dataset.id}: ${err.message}`);
                const ph = document.createElement('div');
                ph.className = 'placeholder bg-red-900/50';
                ph.textContent = `Error loading: ${card.dataset.title || card.dataset.id}`;
                inner.appendChild(ph);
            } finally {
                if (loader) loader.style.display = 'none';
            }
        }

        const states = [];

        function initCard(card) {
            setupCardDOM(card);
            const inner = card.querySelector('.tmdb-inner');
            const shine = card.querySelector('.shine');
            const state = {
                el: card,
                inner,
                shine,
                rect: card.getBoundingClientRect(),
                target: { rx:0, ry:0, tz:0, px:50, py:50 },
                state:  { rx:0, ry:0, tz:0, px:50, py:50 }
            };
            states.push(state);
            function updateRect(){ state.rect = card.getBoundingClientRect(); }
            window.addEventListener('resize', updateRect, { passive:true });
            contentViewport.addEventListener('scroll', updateRect, { passive:true }); 

            card.addEventListener('pointerenter', (ev) => {
                updateRect(); 
                card.setPointerCapture && card.setPointerCapture(ev.pointerId);
            });
            card.addEventListener('pointerleave', (ev) => {
                state.target.rx = 0; state.target.ry = 0; state.target.tz = 0; state.target.px = 50; state.target.py = 50;
                card.releasePointerCapture && card.releasePointerCapture(ev.pointerId);
            });
            card.addEventListener('pointermove', (ev) => {
                if (!state.rect) return; 

                const r = state.rect;
                const cx = r.left + r.width / 2;
                const cy = r.top + r.height / 2;
                const nx = (ev.clientX - cx) / (r.width / 2); 
                const ny = (ev.clientY - cy) / (r.height / 2); 

                const maxTilt = 8; 
                const maxPop = 30; 

        
                state.target.ry = nx * maxTilt;
                state.target.rx = -ny * maxTilt; 
                
                state.target.tz = maxPop;
                
                state.target.px = (nx * 20) + 50; 
                state.target.py = (ny * 20) + 50; 
            });

            card.addEventListener('click', (ev) => {
                ev.preventDefault();
                openModalForCard(card);
            });
            allCardElements.push(card);
        }

        function lerp(a,b,t){ return a + (b - a) * t; }
        function animateAll(){
            for (const s of states) {
                s.state.rx = lerp(s.state.rx, s.target.rx, 0.18);
                s.state.ry = lerp(s.state.ry, s.target.ry, 0.18);
                s.state.tz = lerp(s.state.tz, s.target.tz, 0.18);
                s.state.px = lerp(s.state.px, s.target.px, 0.14);
                s.state.py = lerp(s.state.py, s.target.py, 0.14); 

                s.el.style.transform = `perspective(900px) rotateX(${s.state.rx}deg) rotateY(${s.state.ry}deg) translateZ(${s.state.tz}px)`; 
                
                const innerZ = s.state.tz * 0.6;
                s.inner.style.transform = `translateZ(${innerZ}px)`;
                s.shine.style.background = `radial-gradient(circle at ${s.state.px}% ${s.state.py}%, rgba(255,255,255,0.24), rgba(255,255,255,0.06) 28%, transparent 48%)`;
            }
            requestAnimationFrame(animateAll);
        }

        async function fetchSeasonEpisodes(apiKey, tvId, seasonNumber) {
            const url = `https://api.themoviedb.org/3/tv/${encodeURIComponent(tvId)}/season/${encodeURIComponent(seasonNumber)}?api_key=${encodeURIComponent(apiKey)}`;
            const res = await fetch(url);
            if (!res.ok) throw new Error('Failed fetching season info.');
            const details = await res.json();
            return details.episodes || [];
        }

        async function updateEpisodeSelectAndFrame(card, seasonNumber) {
            const apiKey = __TMDB_API_KEY;
            const id = card.dataset.id;
            seasonSelect.disabled = true;
            episodeSelect.disabled = true;
            try {
                const episodes = await fetchSeasonEpisodes(apiKey, id, seasonNumber);
                episodeSelect.innerHTML = '';
                if (episodes.length) {
                    for (const ep of episodes) {
                        const opt = document.createElement('option');
                        opt.value = ep.episode_number;
                        const name = (ep.name || '').slice(0, 60);
                        opt.textContent = `E${ep.episode_number}` + (name ? ` — ${name}` : '');
                        episodeSelect.appendChild(opt);
                    }
                    episodeSelect.value = episodeSelect.querySelector('option')?.value || episodes[0].episode_number;
                } else {
                    const opt = document.createElement('option');
                    opt.value = '1';
                    opt.textContent = 'E1';
                    episodeSelect.appendChild(opt);
                }

                const season = seasonSelect.value || '1';
                const episode = episodeSelect.value || '1';
                const url = buildVidlinkUrl('tv', id, season, episode);
                modalFrame.src = url;
            } catch (err) {
                console.warn('Failed to fetch season episodes:', err);
                const url = buildVidlinkUrl('tv', id, seasonNumber || 1, 1);
                modalFrame.src = url;
            } finally {
                seasonSelect.disabled = false;
                episodeSelect.disabled = false;
            }
        }

        async function openModalForCard(card) {
            __CURRENT_MODAL_CARD = card;
            const type = card.dataset.mediaType || card.dataset.type || 'movie';
            const id = card.dataset.id;
            const title = card.dataset.title || '';

            modalTitle.textContent = title || '(untitled)';
            modalBackdrop.style.display = 'flex';
            modalBackdrop.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';

            if (type === 'tv') {
                seControls.style.display = 'flex';
                seControls.setAttribute('aria-hidden', 'false');

                let seasons = [];
                try { seasons = JSON.parse(card.dataset.seasons || '[]'); } catch(e) { seasons = []; }
                const numberOfSeasons = parseInt(card.dataset.number_of_seasons || (seasons.length || 0), 10) || 0;

                seasonSelect.innerHTML = '';
                if (seasons && seasons.length) {
                    for (const s of seasons) {
                        const num = s.season_number;
                        const opt = document.createElement('option');
                        opt.value = num;
                        opt.textContent = `S${num}` + (s.name ? ` — ${s.name}` : '');
                        seasonSelect.appendChild(opt);
                    }
                } else {
                    for (let s = 1; s <= Math.max(1, numberOfSeasons); s++) {
                        const opt = document.createElement('option');
                        opt.value = s;
                        opt.textContent = `S${s}`;
                        seasonSelect.appendChild(opt);
                    }
                }

                seasonSelect.value = seasonSelect.querySelector('option')?.value || '1';
                await updateEpisodeSelectAndFrame(__CURRENT_MODAL_CARD, seasonSelect.value);
            } else {
                seControls.style.display = 'none';
                seControls.setAttribute('aria-hidden', 'true');
                const url = buildVidlinkUrl('movie', id);
                modalFrame.src = url;
            }

            closeBtn.focus();
        }

        function closeModal() {
            modalBackdrop.style.display = 'none';
            modalBackdrop.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
            seControls.style.display = 'none';
            seControls.setAttribute('aria-hidden', 'true');
            modalFrame.src = '';
            __CURRENT_MODAL_CARD = null;
            if (document.fullscreenElement) {
                document.exitFullscreen && document.exitFullscreen().catch(()=>{});
                fullscreenBtn.querySelector('i').setAttribute('data-lucide', 'minimize');
            }
            if (typeof lucide !== 'undefined') lucide.createIcons();
        }

        function showAdblockerPopup() {
            const content = `
                <div class="text-center">
                    <i data-lucide="shield-alert" class="w-12 h-12 inline-block text-yellow-400 mb-4" style="filter: drop-shadow(0 0 8px #facc15);"></i>
                    <h2 class="text-2xl font-extrabold text-white mb-3">Ad-Blocker Notice</h2>
                    <p class="text-gray-300 mb-6">
                        please use an ad blocker when watching on this site. the listed media contains ads. we suggest you use <strong class="text-accent-secondary">uBlock Origin</strong>.
                    </p>
                    <p class="text-sm text-gray-500">
                        this message will only be shown once on this device.
                    </p>
                </div>
            `;
            
            openPopup(
                "Important Setup Step", 
                content, 
                false, 
                {
                    text: "Got It, Continue to Site",
                    action: () => {
                        localStorage.setItem('adblockerPopupDismissed', 'true');
                        closePopup();
                    }
                }
            );
            if (typeof lucide !== 'undefined') lucide.createIcons();
        }

        function checkAdblockerPopup() {
            const dismissed = localStorage.getItem('adblockerPopupDismissed');
            if (dismissed !== 'true') {
                setTimeout(showAdblockerPopup, 100); 
            }
        }


        seasonSelect.addEventListener('change', async () => {
            if (!__CURRENT_MODAL_CARD) return;
            await updateEpisodeSelectAndFrame(__CURRENT_MODAL_CARD, seasonSelect.value);
        });

        episodeSelect.addEventListener('change', () => {
            if (!__CURRENT_MODAL_CARD) return;
            const season = seasonSelect.value || 1;
            const episode = episodeSelect.value || 1;
            const url = buildVidlinkUrl('tv', __CURRENT_MODAL_CARD.dataset.id, season, episode);
            modalFrame.src = url;
        });

        modalBackdrop.addEventListener('click', (ev) => {
            if (ev.target === modalBackdrop) closeModal();
        });
        closeBtn.addEventListener('click', closeModal);
        window.addEventListener('keydown', (ev) => {
            if (ev.key === 'Escape' && modalBackdrop.style.display === 'flex' && document.getElementById('popupOverlay').style.display !== 'flex') closeModal();
            if (ev.key === 'Escape' && document.getElementById('popupOverlay').style.display === 'flex') closePopup();
        });

        fullscreenBtn.addEventListener('click', async () => {
            if (!document.fullscreenElement) {
                try {
                    await modal.requestFullscreen();
                    fullscreenBtn.querySelector('i').setAttribute('data-lucide', 'minimize');
                } catch (e) {
                    console.warn('fullscreen failed', e);
                }
            } else {
                await document.exitFullscreen();
                fullscreenBtn.querySelector('i').setAttribute('data-lucide', 'maximize');
            }
            if (typeof lucide !== 'undefined') lucide.createIcons();
        });


        document.addEventListener('DOMContentLoaded', () => {
            checkAdblockerPopup();

            const savedTheme = localStorage.getItem('theme') || 'cyberpunk';
            changeTheme(savedTheme, false);

            const allCards = Array.from(document.querySelectorAll('.tmdb-card'));
            populateGenreFilter('movie');
            populateGenreFilter('tv');

            (async function init(){
                let apiKey;
                try {
                    apiKey = await loadApiKey();
                    __TMDB_API_KEY = apiKey;
                } catch (e) {
                    return;
                }

                for (const card of allCards) initCard(card);
                await Promise.all(allCards.map(c => fillCard(c, apiKey)));

                requestAnimationFrame(animateAll);

                const searchParams = new URLSearchParams(window.location.search);
                const view = searchParams.get('view') || 'movies';
                switchPage(view, false);

                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }

            })();
        });
    </script>

    <div id="popupOverlay" class="popup-backdrop">
        <div class="popup bg-gray-900 rounded-xl shadow-2xl border border-gray-800">
            <div class="popup-header bg-gray-800">
                <h3 id="popupTitle" class="text-white text-lg font-bold">Title</h3>
                <button id="popupClose" onclick="closePopup()" class="text-2xl text-gray-400 hover:text-white transition">×</button> 
            </div>
            <div id="popupBody" class="popup-body">
            </div>
        </div>
    </div>
</body>
</html>
